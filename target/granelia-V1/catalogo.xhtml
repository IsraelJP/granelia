<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="jakarta.faces.facelets">
<h:head>
    <title>GRANELIA - Usuarios (API Test)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <h:outputStylesheet name="global.css"/>
</h:head>
<h:body class="d-flex flex-column min-vh-100">


<main class="container my-4 flex-fill">
    <h:form id="formUsers" class="mb-3">
        <div class="d-flex gap-2">
            <h:commandButton value="Cargar usuarios"
                             styleClass="btn btn-primary"
                             actionListener="#{usersBean.cargar}">
                <f:ajax render="tabla msgs"/>
            </h:commandButton>
        </div>

        <h:messages id="msgs" class="mt-3"/>

        <!-- Tabla de usuarios -->
        <h:panelGroup id="tabla">
            <table class="table table-striped table-hover mt-3">
                <thead class="table-light">
                <tr>
                    <th>#</th>
                    <th>Nombre</th>
                    <th>Usuario</th>
                    <th>Email</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <ui:repeat value="#{usersBean.usuarios}" var="u">
                    <tr>
                        <td>#{u.id}</td>
                        <td>#{u.name}</td>
                        <td>#{u.username}</td>
                        <td>#{u.email}</td>
                        <td>
                        </td>
                    </tr>
                </ui:repeat>
                </tbody>
            </table>
        </h:panelGroup>

    </h:form>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</h:body>
</html>
